<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Script Example</title>
</head>
<body>
<p>
    <script type="text/javascript">
        document.write("the date is " + (new Date()).toDateString())
    </script>
</p>

<script defer>
    alert('defer')
</script>
<script>
    alert('script')
</script>
<script>
    window.onload = function () {
        alert('load')
    }
</script>

<p>
    当浏览器遇到<\script>标签时， 当前HTML页面无从获知JavaScript <br>
    是否会向 < p > 标签添加内容，或引入其他元素，或甚至关闭该标签。 因此，<br>
    这时浏览器会停止处理页面，先执行JavaScript代码，然后再继续解析和渲染页面。<br>
    同样的情况也发生在使用sre属性加载JavaScript的过程中，浏览器必须先花时间下<br>
    载外链文件中的代码，然后解折并执行。在这个过程中，页面渲染和用户交互是完全被阻塞的。
</p>

<p>
    1.把与样式和行为有关的脚本放在一起，并先加载它们，这样做有助于确保页面渲染和交互的正确性；<br>
    2.由于脚本会阻塞页面其他资源的下载，因此推荐将所有的script标签尽可能放到body标签的底部，以尽量减少对整个页面下载的影响；<br>
    3.减少页面中外链脚本文件的数量将会改善性能；<br>
    4.无阻塞脚本的秘诀在于，在页面加载完成后才加载JavaScript代码。用专业术语来说，这意味着在window对象的load事件触发后再下载脚本。<br>
    5.HTML 4为<\script>标签定义了一个扩展属性:defer。 Defer 属性指明本元素所含的脚本不会修改DOM，因此代码能安全地延迟执行。<br>
    不支持defer弹出的顺序是defer,script,load；支持defer弹出的顺序是script,defer,load。
</p>

<p>
<p>小结</p>

管理浏览器中的JavaScip代码是个棘手的问题，因为代码执行过程会阻塞浏览器的其他进<br>
程，比如用户界面绘制。 每次遇到<\script>标签，页面都必须停下来等待代码下载(如果是<br>
外链文件)并执行，然后继续处理其他部分。尽管如此，还是有几种方法能减少JavaScript<br>
对性能的影响:

<Li><\body>闭合标签之前， 将所有的 < script > 标签放到页面底部。 这能确保在脚本执行前页面已经完成了渲染。</Li>
<li>合并脚本。页面中的 < script > 标签越少，加载也就越快，响应也更迅速。无论外链文件还是内嵌脚本都是如此。</li>

<li>
    有多种无阻塞下载JavaScript的方法:<br>
    使用 < script > 标签的defer属性；<br>
    使用动态创建的 < script > 元素来下载并执行代码；<br>
    使用XHR对象下载JavaScript代码并注入页面中。<br>
</li>
<br>
通过以上策略, 可以极大提高那些需要使用大量JavaScript的Web应用的实际性能。
</p>
</body>
</html>
